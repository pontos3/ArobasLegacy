version: '3.7'
services:
    database:
        build: ./sqlserver
        image: mcr.microsoft.com/mssql/server:2017-latest
        environment: 
            SA_PASSWORD: P@ssw0rd
            ACCEPT_EULA: Y
        volumes:
            - ./sqlserver/data/:/var/opt/mssql/data/
            - ./sqlserver/backup/:/var/opt/mssql/backup/
            - ./sqlserver/restore/:/var/opt/mssql/restore/
        ports:
            - "1433:1433"
        networks:
            arobas_network:
    
    appsrv:
        image: tomcat:6.0.48
        depends_on: 
            - database
        ports:
            - "8888:8080"
        volumes:
            - ./appsrv/conf/:/usr/local/tomcat/conf
            - ./appsrv/webapps/:/usr/local/tomcat/webapps
        networks:
            arobas_network:

    proxy:
        image: httpd:2.4.41-alpine
        depends_on: 
            - appsrv
        ports:
            - "81:80"
        networks:
            arobas_network:

networks:
    arobas_network: